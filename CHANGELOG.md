# Change Log

All notable changes to this project will be documented in this file
automatically by Versionist. DO NOT EDIT THIS FILE MANUALLY!
This project adheres to [Semantic Versioning](http://semver.org/).

## 4.8.16 - 2023-06-14

* Skip GPG signing when using app installation tokens [Kyle Harding]

## 4.8.15 - 2023-06-14

* Update peter-evans/create-pull-request action to v5.0.2 [Self-hosted Renovate Bot]

## 4.8.14 - 2023-06-13

* Inject secrets into environment [ab77]

## 4.8.13 - 2023-06-13

* Update docker/setup-qemu-action digest to 2b82ce8 [Self-hosted Renovate Bot]

## 4.8.12 - 2023-06-13

* Update docker/setup-buildx-action digest to ecf9528 [Self-hosted Renovate Bot]

## 4.8.11 - 2023-06-13

* Update docker/bake-action digest to f32f8b8 [Self-hosted Renovate Bot]

## 4.8.10 - 2023-06-13

* Update docker/metadata-action digest to 818d4b7 [Self-hosted Renovate Bot]

## 4.8.9 - 2023-06-13

* Pin aws-actions/configure-aws-credentials action to 5727f24 [Self-hosted Renovate Bot]

## 4.8.8 - 2023-06-13

* Update actions/checkout digest to c85c95e [Self-hosted Renovate Bot]

## 4.8.7 - 2023-06-13

* Fix formatting and lint warnings in README [Kyle Harding]

## 4.8.6 - 2023-06-12

* Dedup AWS steps [ab77]
* Handle all cases of CFN waits [ab77]

## 4.8.5 - 2023-06-12

* Separate parameters with a space [ab77]

## 4.8.4 - 2023-06-12

* Update docker/login-action digest to 465a078 [Self-hosted Renovate Bot]

## 4.8.3 - 2023-06-12

* Update docker/setup-buildx-action digest to 6a58db7 [Self-hosted Renovate Bot]

## 4.8.2 - 2023-06-12

* Missing AWS auth on finalize [ab77]

## 4.8.1 - 2023-06-12

* Fix log level tag [ab77]

## 4.8.0 - 2023-06-12

* AWS/CloudFormation job type [ab77]

## 4.7.6 - 2023-06-01

* whitelist external PRs on self-hosted [ab77]

## 4.7.5 - 2023-05-29

* Update versionist to v7 supporting yq v4 [Kyle Harding]

## 4.7.4 - 2023-05-25

* Update actions/setup-python digest to bd6b4b6 [Self-hosted Renovate Bot]

## 4.7.3 - 2023-05-17

* Remove macos-11 as it does not support zstd [Kyle Harding]
* Test custom actions on a range of hosted runners [Kyle Harding]

## 4.7.2 - 2023-05-11

* Use automatic compression detection for gh-release artifacts [Pagan Gazzard]
* Convert docker image compression to zstd [Pagan Gazzard]
* Convert docs artifact compression to zstd [Pagan Gazzard]
* Convert source artifact compression to zstd [Pagan Gazzard]

## 4.7.1 - 2023-05-11

* Update registry Docker tag to v2.8.2 [Renovate Bot]

## 4.7.0 - 2023-05-09

* Make pseudo-tty allocation optional. [Felipe Lalanne]

## 4.6.1 - 2023-05-08

* Write `script` output to /tmp [Felipe Lalanne]

## 4.6.0 - 2023-05-08

* Enable pseudo-tty allocation on test steps [Felipe Lalanne]

## 4.5.4 - 2023-05-06

* Update crazy-max/ghaction-import-gpg action to v5.3.0 [Renovate Bot]

## 4.5.3 - 2023-05-03

* Update balena-versionist to v0.14.13 [Felipe Lalanne]

## 4.5.2 - 2023-05-02

* Update peter-evans/create-pull-request action to v5.0.1 [Renovate Bot]

## 4.5.1 - 2023-05-01

* Catch failure when repo visibility is unchanged [Kyle Harding]

## 4.5.0 - 2023-04-25

* Update dependency yaml to v2.2.2 [SECURITY] [Renovate Bot]

## 4.4.0 - 2023-04-25

* Only pack and upload for the latest node version [Kyle Harding]

## 4.3.6 - 2023-04-24

* Update actions/setup-python digest to 57ded4d [Renovate Bot]

## 4.3.5 - 2023-04-24

* Fix does not deploy python test package on each flowzone release [Otávio Jacobi]

## 4.3.4 - 2023-04-24

* Skip docker save and upload when publish is disabled [Kyle Harding]

## 4.3.3 - 2023-04-20

* Builds python release on finalize [Otávio Jacobi]

## 4.3.2 - 2023-04-20

* Fixes typo in python_finalize [Otávio Jacobi]

## 4.3.1 - 2023-04-20

* Fixes python_finalize name [Otávio Jacobi]

## 4.3.0 - 2023-04-20

* Publishes python(poetry) packages to PyPI [Otávio Jacobi]

## 4.2.6 - 2023-04-20

* chore(deps): update actions/setup-python digest to 57ded4d [Renovate Bot]

## 4.2.5 - 2023-04-19

* chore(deps): update docker/bake-action digest to ad0d2a9 [Renovate Bot]

## 4.2.4 - 2023-04-19

* chore(deps): update peter-evans/close-pull action to v3.0.1 [Renovate Bot]

## 4.2.3 - 2023-04-18

* Adds company-os installation ID [Otávio Jacobi]

## 4.2.2 - 2023-04-18

* Disable SLSA Provenance attestation for now [Kyle Harding]

## 4.2.1 - 2023-04-18

* chore(deps): update docker/metadata-action digest to c4ee3ad [Renovate Bot]

## 4.2.0 - 2023-04-18

* chore(deps): update docker/bake-action action to v3 [Renovate Bot]

## 4.1.9 - 2023-04-14

* Adds patch bump to commit footer on e2e [Otávio Jacobi]

## 4.1.8 - 2023-04-14

* chore(deps): update dawidd6/action-download-artifact digest to 246dbf4 [Renovate Bot]

## 4.1.7 - 2023-04-13

* chore(deps): update actions/checkout digest to 8e5e7e5 [Renovate Bot]

## 4.1.6 - 2023-04-12

* Disable verbose extracting of source artifacts [Kyle Harding]

## 4.1.5 - 2023-04-12

* Update workflow-dispatch.md [Kyle Harding]

## 4.1.4 - 2023-04-12

* chore(deps): update actions/checkout digest to 83b7061 [Renovate Bot]

## 4.1.3 - 2023-04-10

* Allows each repo to customize extend-ignore rules on python [Otávio Jacobi]

## 4.1.2 - 2023-04-09

* chore(deps): update peter-evans/dockerhub-description digest to 579f64c [Renovate Bot]

## 4.1.1 - 2023-04-07

* chore(deps): update peter-evans/dockerhub-description digest to 4b1a4bb [Renovate Bot]

## 4.1.0 - 2023-04-06

* chore(deps): update peter-evans/close-pull action to v3 [Renovate Bot]

## 4.0.1 - 2023-04-05

* Only bump the minor version for github actions major revisions [Kyle Harding]

## 4.0.0 - 2023-04-05

* chore(deps): update peter-evans/create-pull-request action to v5 [Renovate Bot]

## 3.6.4 - 2023-04-05

* Use automatic GHA token for steps with user code [Kyle Harding]

## 3.6.3 - 2023-04-05

* Toggle auto-merge with a reduced scope ephemeral token [Kyle Harding]

## 3.6.2 - 2023-04-04

* Remove wait for required checks [Kyle Harding]

## 3.6.1 - 2023-04-04

* chore(deps): update product-os/docusaurus-builder action to v1.5.4 [Renovate Bot]

## 3.6.0 - 2023-04-04

* Prevent waiting for jobs that are part of the same workflow [Kyle Harding]

## 3.5.5 - 2023-04-04

* Combine tagged source and versioned source jobs [Kyle Harding]

## 3.5.4 - 2023-04-04

* chore(deps): update dawidd6/action-download-artifact digest to 7132ab5 [Renovate Bot]

## 3.5.3 - 2023-04-04

* Skip npm pack for private packages [Kyle Harding]

## 3.5.2 - 2023-04-03

* Restore missing dependency to tagged source job [Kyle Harding]

## 3.5.1 - 2023-04-03

* Do not use automatic GHA token to enable auto-merge [Kyle Harding]

## 3.5.0 - 2023-04-03

* Disable auto-merge by default [Kyle Harding]
* Fix run conditions for tagged source [Kyle Harding]
* Toggle auto-merge after required checks have registered [Kyle Harding]

## 3.4.7 - 2023-03-30

* chore(deps): update peaceiris/actions-gh-pages digest to 373f7f2 [Renovate Bot]

## 3.4.6 - 2023-03-30

* Add app token generation to custom action examples [Kyle Harding]

## 3.4.5 - 2023-03-30

* Restore missing checkout step for unversioned external pull requests [Kyle Harding]

## 3.4.4 - 2023-03-29

* Use the bake target for the ref.name docker image label [Kyle Harding]

## 3.4.3 - 2023-03-27

* chore(deps): pin imjasonh/setup-crane action to 00c9e93 [Renovate Bot]

## 3.4.2 - 2023-03-27

* Install crane for docker finalize [Kyle Harding]

## 3.4.1 - 2023-03-27

* e2e: Use JSON inputs for repositories and required checks [Kyle Harding]

## 3.4.0 - 2023-03-27

* Allow publishing of intermediate docker images [Kyle Harding]

## 3.3.0 - 2023-03-27

* Update balena-io/deploy-to-balena-action action to v0.27.0 [Renovate Bot]

## 3.2.9 - 2023-03-27

* Update balena-io/deploy-to-balena-action action to v0.26.4 [Renovate Bot]

## 3.2.8 - 2023-03-27

* Pin balena-io/deploy-to-balena-action action to af84925 [Renovate Bot]

## 3.2.7 - 2023-03-26

* Reject internal pull requests using pull_request_target [Kyle Harding]

## 3.2.6 - 2023-03-26

* Pin deploy-to-balena action to a release [Kyle Harding]

## 3.2.5 - 2023-03-26

* Reject use of self-hosted runners for external pull requests [Kyle Harding]

## 3.2.4 - 2023-03-24

* Update actions/checkout digest to 8f4b7f8 [Renovate Bot]

## 3.2.3 - 2023-03-23

* Change e2e tests to an optional dispatch job [Kyle Harding]

## 3.2.2 - 2023-03-23

* Assign unique gha cache scopes for each docker target/platform [Kyle Harding]

## 3.2.1 - 2023-03-23

* Add missing job dependency in cargo_publish [Kyle Harding]

## 3.2.0 - 2023-03-22

* Reject duplicate workflow calls [Kyle Harding]

## 3.1.0 - 2023-03-22

* Run protect branch early in the workflow [Kyle Harding]

## 3.0.1 - 2023-03-22

* Default to max gha cache for docker builds [Kyle Harding]

## 3.0.0 - 2023-03-22

* Change default docker tag format to {tag}-{variant} [Kyle Harding]

## 2.8.3 - 2023-03-20

* Remove manual docker cleanup steps [Kyle Harding]

## 2.8.2 - 2023-03-16

* Disable testing on self-hosted armv7 until we fix the rate limiting [Kyle Harding]
* Remove auto-merge enable step [Kyle Harding]

## 2.8.1 - 2023-03-16

* Update actions/checkout digest to 24cb908 [Renovate Bot]

## 2.8.0 - 2023-03-16

* Add a manual workflow to bulk update repositories [Kyle Harding]

## 2.7.3 - 2023-03-15

* Prevent duplicate workflows for pull_request and pull_request_target [Kyle Harding]

## 2.7.2 - 2023-03-15

* Update peter-evans/create-pull-request action to v4.2.4 [Renovate Bot]

## 2.7.1 - 2023-03-15

* Re-enable self-tests on armv7 and x86 self-hosted runners [Kyle Harding]

## 2.7.0 - 2023-03-14

* Add checkpoints to evaluate result of multiple jobs [Kyle Harding]

## 2.6.7 - 2023-03-14

* Do not setup QEMU on self-hosted runners [Kyle Harding]

## 2.6.6 - 2023-03-10

* Update docker/setup-buildx-action digest to 4b4e9c3 [Renovate Bot]

## 2.6.5 - 2023-03-10

* Pin to a fixed release of QEMU binfmt [Kyle Harding]

## 2.6.4 - 2023-03-10

* Make sure protect branch always runs and cannot be skipped [Kyle Harding]

## 2.6.3 - 2023-03-09

* Fix missing env_file when parsing docker-compose [Kyle Harding]

## 2.6.2 - 2023-03-09

* Avoid writing files to the docker project directory [Kyle Harding]

## 2.6.1 - 2023-03-09

* Use anchors for trusted gh cli env vars [Kyle Harding]
* Do not apply branch protection for PRs between branches [Kyle Harding]

## 2.6.0 - 2023-03-09

* Rename project type checks to booleans [Kyle Harding]
* Remove sanitize inputs job [Kyle Harding]
* Move custom sanitized inputs to custom check [Kyle Harding]
* Move cargo sanitized inputs to cargo check [Kyle Harding]
* Move balena sanitized inputs to balena check [Kyle Harding]
* Move docker sanitized inputs to docker check [Kyle Harding]
* Reject conflicting secrets during context checks [Kyle Harding]

## 2.5.1 - 2023-03-08

* Add balena release notes [ab77]

## 2.5.0 - 2023-03-08

* Make required checks for branch protection configurable [Kyle Harding]

## 2.4.1 - 2023-03-07

* Compress docker artifacts before uploading [Kyle Harding]

## 2.4.0 - 2023-03-06

* chore(deps): update peter-evans/dockerhub-description digest to 202973a [Renovate Bot]

## 2.3.1 - 2023-03-06

* Remove handbook from e2e tests [Kyle Harding]
* Refactor generation of sanitized docker strings [Kyle Harding]

## 2.3.0 - 2023-03-05

* chore(deps): update peter-evans/dockerhub-description digest to 79b6345 [Renovate Bot]

## 2.2.0 - 2023-03-03

* Enable custom runners per docker platform [Kyle Harding]

## 2.1.1 - 2023-03-01

* patch: Show Cloudflare Command output in logs [Vipul Gupta (@vipulgupta2048)]

## 2.1.0 - 2023-03-01

* Pass vars context to custom* [ab77]

## 2.0.1 - 2023-02-28

* balena registry secrets [ab77]

## 2.0.0 - 2023-02-28

* Use self-hosted runners for docker builds [Kyle Harding]

## 1.11.3 - 2023-02-22

* Require 3 passing loops of required checks for draft PRs [Kyle Harding]

## 1.11.2 - 2023-02-22

* Fix conditional when branch rules have changed [Kyle Harding]

## 1.11.1 - 2023-02-21

* Use docker secrets to inject GitHub tokens [Kyle Harding]

## 1.11.0 - 2023-02-21

* Update dawidd6/action-download-artifact digest to 5e780fc [Renovate Bot]

## 1.10.3 - 2023-02-21

* Merge github token logic and populate missing references [Kyle Harding]

## 1.10.2 - 2023-02-21

* Inject github tokens to docker build and test [Kyle Harding]

## 1.10.1 - 2023-02-20

* Use GITHUB_TOKEN to push images to gh.cr [Kyle Harding]
* Add missing ephemeral token steps [Kyle Harding]

## 1.10.0 - 2023-02-17

* Pin tibdex/github-app-token action to b625283 [Renovate Bot]

## 1.9.2 - 2023-02-17

* Correct external contribution restrictions [Kyle Harding]

## 1.9.1 - 2023-02-17

* Correct regression [ab77]

## 1.9.0 - 2023-02-16

* Ephemeral access tokens [ab77]

## 1.8.5 - 2023-02-15

* Publish GitHub Release artifacts with Flowzone token [Kyle Harding]
* Expose a github token with no permissions to docker build [Kyle Harding]
* Remove all permissions from the default github token [Kyle Harding]

## 1.8.4 - 2023-02-15

* Update product-os/docusaurus-builder action to v1.5.3 [Renovate Bot]

## 1.8.3 - 2023-02-14

* Update product-os/docusaurus-builder action to v1.5.2 [Renovate Bot]

## 1.8.2 - 2023-02-14

* Update product-os/docusaurus-builder action to v1.5.1 [Renovate Bot]

## 1.8.1 - 2023-02-13

* Remove versioned source from protect branch steps [Kyle Harding]

## 1.8.0 - 2023-02-13

* Pin dawidd6/action-download-artifact action to b59d8c6 [Renovate Bot]

## 1.7.0 - 2023-02-13

* Split context check into boolean operators [Kyle Harding]

## 1.6.0 - 2023-02-10

* Skip applying branch protection if rules are unchanged [Kyle Harding]

## 1.5.1 - 2023-02-09

* Fix source checkout for merged PRs from forks [Kyle Harding]

## 1.5.0 - 2023-02-08

* Check if npm lock file exists [fisehara]

## 1.4.6 - 2023-02-08

* Use anchors to set the GitHub CLI environment [Kyle Harding]

## 1.4.5 - 2023-02-08

* Allow pulling private base images for private repositories [Kyle Harding]

## 1.4.4 - 2023-02-08

* Avoid leaking secrets from COMPOSE_VARS [Kyle Harding]

## 1.4.3 - 2023-02-07

* Enable npm cache via github actions [Kyle Harding]
* Login to npm registry with setup-node action [Kyle Harding]
* Set npm publish access based on repo visibility [Kyle Harding]

## 1.4.2 - 2023-02-07

* Don't leak compose secrets [ab77]

## 1.4.1 - 2023-02-06

* Use credentials for versionist, enabling private nested changelogs [Pagan Gazzard]

## 1.4.0 - 2023-02-06

* Update docker/setup-buildx-action digest to f03ac48 [Renovate Bot]

## 1.3.9 - 2023-02-04

* Test with ob base [Kyle Harding]
* Add a line comment to downstream e2e commits [Kyle Harding]

## 1.3.8 - 2023-02-03

* Cancel concurrent jobs with the exception of merged PRs [Kyle Harding]

## 1.3.7 - 2023-02-03

* Fix bake file pre-processing issues [Kyle Harding]

## 1.3.6 - 2023-02-03

* Replace supervisor draft PRs with oB registry proxy [Kyle Harding]

## 1.3.5 - 2023-02-03

* Avoid extra tagging when merging unversioned PRs [Kyle Harding]

## 1.3.4 - 2023-02-03

* Avoid parsing branches with git describe [Kyle Harding]

## 1.3.3 - 2023-02-03

* Restore old tag lookup behaviour [Kyle Harding]

## 1.3.2 - 2023-02-03

* Block publish jobs until all tests are success or skipped [Kyle Harding]

## 1.3.1 - 2023-02-03

* Fix handling of versionist errors [Kyle Harding]
* Fix parsing of tags when versioning is disabled [Kyle Harding]

## 1.3.0 - 2023-02-03

* Split tagged and versioned source jobs [Kyle Harding]

## 1.2.0 - 2023-02-02

* Make GitHub PR automerge opt-in for now [Kyle Harding]

## 1.1.2 - 2023-02-02

* Skip creating comments for every downstream PR [Kyle Harding]
* Update downstream PR title [Kyle Harding]
* Add timestamp to e2e commit messages [Kyle Harding]
* Skip e2e tests on forks [Kyle Harding]

## 1.1.1 - 2023-02-01

* Renove balena-cli from e2e tests and re-enable fatrw [Kyle Harding]

## 1.1.0 - 2023-02-01

* Make the Rust toolchain version user configurable [Felipe Lalanne]

## 1.0.0 - 2023-02-01

* Break monolithic jobs into smaller services [Kyle Harding]

## 0.67.0 - 2023-02-01

* Pin dependencies [Renovate Bot]

## 0.66.0 - 2023-01-31

* Skip updating branch protection on draft pull requests [Kyle Harding]

## 0.65.1 - 2023-01-31

* Update list of downstream test repos [Kyle Harding]
* Fail draft PR check if checks are empty and unchanging [Kyle Harding]

## 0.65.0 - 2023-01-31

* Open draft PRs in downstream repos for each Flowzone PR [Kyle Harding]

## 0.64.1 - 2023-01-30

* Encode docker compose config as base64 to preserve special characters [Kyle Harding]

## 0.64.0 - 2023-01-30

* Update docker/setup-buildx-action digest to 15c905b [Renovate Bot]

## 0.63.0 - 2023-01-28

* Update docker/setup-buildx-action digest to 5e716dc [Renovate Bot]

## 0.62.2 - 2023-01-26

* Use -f for multi-docker-compose instead of COMPOSE_FILE [Christina Ying Wang]

## 0.62.1 - 2023-01-26

* Reverse docker compose file preprocessing order to favor `test` yaml [Christina Ying Wang]

## 0.62.0 - 2023-01-25

* Update product-os/docusaurus-builder action to 1.5.0 [Renovate Bot]

## 0.61.8 - 2023-01-25

* Update product-os/docusaurus-builder action to 1.4.2 [Renovate Bot]

## 0.61.7 - 2023-01-25

* Saves the COMPOSE_VARS secret to .env for docker-compose pre-processing. [Carlo Miguel F. Cruz]

## 0.61.6 - 2023-01-25

* Restore target prefix for non-default targets [Kyle Harding]

## 0.61.5 - 2023-01-25

* Fix checks when docker-compose files are not found [Kyle Harding]
* Write docker-compose file to the working directory [Kyle Harding]

## 0.61.4 - 2023-01-24

* Save image to file before running compose tests [Kyle Harding]

## 0.61.3 - 2023-01-24

* Pre-process compose files so we can modify them before tests [Kyle Harding]

## 0.61.2 - 2023-01-24

* Disable pager for git log commands to avoid error 141 [Kyle Harding]

## 0.61.1 - 2023-01-24

* Avoid name clashes by specifying branches with heads reference [Alex Gonzalez]

## 0.61.0 - 2023-01-23

* Separate docker publish from docker test [Kyle Harding]
* Add multiarch target to docker bake tests [Kyle Harding]

## 0.60.1 - 2023-01-23

* chore(deps): update product-os/docusaurus-builder action to 1.4.1 [Renovate Bot]

## 0.60.0 - 2023-01-20

* Prevent external contributions from applying branch protection [Kyle Harding]
* Make sure event_types is required by every job [Kyle Harding]
* Move workflow de-duplication condition into flowzone core [Kyle Harding]

## 0.59.0 - 2023-01-20

* chore(deps): update product-os/docusaurus-builder action to 1.4.0 [Renovate Bot]

## 0.58.2 - 2023-01-19

* patch: Update docusaurus action name again [Vipul Gupta (@vipulgupta2048)]

## 0.58.1 - 2023-01-18

* Fix parsing of previous tag for release notes [Kyle Harding]

## 0.58.0 - 2023-01-17

* fix(deps): update dependency jest to 29.3.1 [Renovate Bot]

## 0.57.0 - 2023-01-17

* chore(deps): update docker/metadata-action digest to 507c2f2 [Renovate Bot]

## 0.56.0 - 2023-01-17

* chore(deps): update peaceiris/actions-gh-pages digest to bd8c6b0 [Renovate Bot]

## 0.55.4 - 2023-01-17

* Write release notes to file to avoid parsing errors [Kyle Harding]
* Update previous tag search to match the v prefix [Kyle Harding]

## 0.55.3 - 2023-01-16

* Allow continue on error when pushing versioned commit [Kyle Harding]

## 0.55.2 - 2023-01-16

* Index the first element of the node_versions array [Kyle Harding]

## 0.55.1 - 2023-01-16

* Only download the required npm artifacts for finalize [Kyle Harding]

## 0.55.0 - 2023-01-16

* chore(deps): update actions/setup-python digest to d27e3f3 [Renovate Bot]

## 0.54.3 - 2023-01-14

* Restore case insensitive regex [Kyle Harding]

## 0.54.2 - 2023-01-14

* Fix error in required checks regex [Kyle Harding]

## 0.54.1 - 2023-01-13

* Improve regex for matching required status checks [Kyle Harding]

## 0.54.0 - 2023-01-12

* chore(deps): update actions/setup-node digest to 64ed1c7 [Renovate Bot]

## 0.53.0 - 2023-01-12

* chore(deps): update actions/upload-artifact digest to 0b7f8ab [Renovate Bot]

## 0.52.0 - 2023-01-12

* Set default required reviewers to zero [Kyle Harding]
* Enable auto-merge on the PR if policy-bot is enabled [Kyle Harding]
* Detect Flowzone & policy-bot status checks and mark as required [Kyle Harding]

## 0.51.1 - 2023-01-11

* renovate: Add generated flowzone workflow to ignored files [Kyle Harding]

## 0.51.0 - 2023-01-07

* Update actions/download-artifact digest [Renovate Bot]

## 0.50.0 - 2023-01-05

* Update actions/checkout digest to ac59398 [Renovate Bot]

## 0.49.2 - 2023-01-04

* selectively run npm i|ci [ab77]

## 0.49.1 - 2023-01-04

* Check package architecture(s) [ab77]

## 0.49.0 - 2022-12-29

* Update actions/setup-python digest to 5ccb29d [Renovate Bot]

## 0.48.0 - 2022-12-29

* Install dependencies with`npm ci` for projects using npm-shrinkwrap.json [Thodoris Greasidis]

## 0.47.1 - 2022-12-29

* Revert pre-commit hook [ab77]

## 0.47.0 - 2022-12-29

* Update akhilerm/tag-push-action digest to 239dfa3 [Renovate Bot]

## 0.46.3 - 2022-12-20

* Remove duplication [ab77]

## 0.46.2 - 2022-12-20

* Only mask the values [ab77]

## 0.46.1 - 2022-12-19

* Mask COMPOSE_VARS secrets [balena-ci]

## 0.46.0 - 2022-12-17

* Add the tests_run_on value to the custom test environment as os_value [Thodoris Greasidis]

## 0.45.3 - 2022-12-17

* Require website build to pass [Kyle Harding]
* Enable docusaurus website build by default [Kyle Harding]

## 0.45.2 - 2022-12-16

* patch: Add input for custom website build [Vipul Gupta (@vipulgupta2048)]

## 0.45.1 - 2022-12-14

* Pin the default worker to ubuntu-22.04 [Kyle Harding]

## 0.45.0 - 2022-12-14

* chore(deps): update akhilerm/tag-push-action action to 2.1.0 [Renovate Bot]

## 0.44.0 - 2022-12-14

* chore(deps): pin dependencies [Renovate Bot]

## 0.43.4 - 2022-12-14

* renovate: run npm build instead of npm test [Kyle Harding]

## 0.43.3 - 2022-12-14

* Fix syntax of renovate post upgrade commands [Kyle Harding]

## 0.43.2 - 2022-12-13

* Add post-upgrade command for Renovate [Kyle Harding]

## 0.43.1 - 2022-12-13

* Extend filematch for Renovate github-actions manager [Kyle Harding]

## 0.43.0 - 2022-12-13

* Rename docusaurus-theme to docusaurus-builder [Anuj Deshpande]

## 0.42.5 - 2022-12-10

* patch: Add flowzone Docs website [Vipul Gupta (@vipulgupta2048)]

## 0.42.4 - 2022-12-09

* Fix dockerhub repository output for descriptions [Kyle Harding]

## 0.42.3 - 2022-12-09

* Enhance error message for GH API branch protection [fisehara]

## 0.42.2 - 2022-12-08

* Strip docker.io prefix when updating dockerhub description [Kyle Harding]

## 0.42.1 - 2022-12-08

* PR auto-merge only if reviewers > 0 [ab77]

## 0.42.0 - 2022-12-08

* Enable PR auto-merge [ab77]

## 0.41.13 - 2022-12-07

* patch: Convert publish command into one line [Vipul Gupta (@vipulgupta2048)]

## 0.41.12 - 2022-12-06

* Handle forking setting edge case [ab77]

## 0.41.11 - 2022-12-06

* Single line description [ab77]

## 0.41.10 - 2022-12-06

* Refactor description parameter handling [ab77]

## 0.41.9 - 2022-12-06

* Fix parameter handling [ab77]

## 0.41.8 - 2022-12-06

* Escape required quotes [ab77]

## 0.41.7 - 2022-12-06

* Trim repo description [ab77]

## 0.41.6 - 2022-12-06

* Correct missing quotes and is_org [ab77]

## 0.41.5 - 2022-12-06

* Correct conditional on empty input [ab77]

## 0.41.4 - 2022-12-06

* Correct conditional (use bool) [ab77]

## 0.41.3 - 2022-12-06

* Correct conditional (input, not job) [ab77]

## 0.41.2 - 2022-12-06

* Only depend on event_types [ab77]

## 0.41.1 - 2022-12-06

* Fix dependencies for repo_config job [ab77]

## 0.41.0 - 2022-12-06

* Standardise repository settings [ab77]

## 0.40.10 - 2022-12-05

* Allow GitHub pre-release(s) [ab77]
* Add a warning regarding COMPOSE_VARS secrets [Kyle Harding]

## 0.40.9 - 2022-12-05

* patch: Upgrade *versionist versions [Vipul Gupta]

## 0.40.8 - 2022-12-03

* Use verbose output in calls to `cross` command [Felipe Lalanne]

## 0.40.7 - 2022-12-02

* Checkout the PR merge branch for pull_request_target events [Kyle Harding]

## 0.40.6 - 2022-12-02

* Remove the checkout ref until it can be fixed properly [Kyle Harding]

## 0.40.5 - 2022-12-01

* Send branch to cloudflare so merge to master deploys to prod [Anuj Deshpande]

## 0.40.4 - 2022-12-01

* Add yaml header to repo.yml [vpnarea]

## 0.40.3 - 2022-11-30

* Fix refence to merge_commit_sha that was returning empty [Kyle Harding]

## 0.40.2 - 2022-11-30

* Avoid failing Flowzone internal tests when COMPOSE_VARS is unset [Kyle Harding]

## 0.40.1 - 2022-11-30

* Run clippy using cross for rust targets [Felipe Lalanne]

## 0.40.0 - 2022-11-30

* Use merge_commit_sha to checkout PR sources [Kyle Harding]
* For PR events we need the merged source [Kyle Harding]
* Update documentation to outline external contributions [Kyle Harding]
* Enable external contributions [Kyle Harding]

## 0.39.15 - 2022-11-29

* Only update dockerhub description on PRs to default branch [Kyle Harding]

## 0.39.14 - 2022-11-29

* Add security checks for external contributors [Kyle Harding]

## 0.39.13 - 2022-11-29

* Skip custom actions for external contributions by default [Kyle Harding]

## 0.39.12 - 2022-11-28

* patch: Document need for balena publish/finalize API secret [Vipul Gupta (@vipulgupta2048)]

## 0.39.11 - 2022-11-25

* Avoid leaking npm secrets during npm tests [Kyle Harding]

## 0.39.10 - 2022-11-25

* Add build- prefix to npm branch tags to avoid matching semver [Kyle Harding]

## 0.39.9 - 2022-11-24

* Only login to docker registries immediately before pushing [Kyle Harding]

## 0.39.8 - 2022-11-24

* Remove the global GHCR_TOKEN env var as it contains secrets [Kyle Harding]

## 0.39.7 - 2022-11-23

* Bump versionist & balena-versionist [Thodoris Greasidis]

## 0.39.6 - 2022-11-23

* Use merge source when creating github release notes [Felipe Lalanne]

## 0.39.5 - 2022-11-23

* Rename tag {branch} to build-{branch} for draft docker images [Kyle Harding]
* Run docker tests in parallel with npm and custom tests [Kyle Harding]
* Clone source during docker finalize for DockerHub description [Kyle Harding]

## 0.39.4 - 2022-11-22

* Update import-gpg action to v5.2.0 [Kyle Harding]

## 0.39.3 - 2022-11-22

* Reject workflow if latest branch commit is a merge commit [Kyle Harding]

## 0.39.2 - 2022-11-22

* Update kanga333/json-array-builder to v0.2.1 [Kyle Harding]

## 0.39.1 - 2022-11-22

* Update DockerHub description on docker finalize [Kyle Harding]

## 0.39.0 - 2022-11-21

* Add support for building a website using product-os/docusaurus-theme [Anuj Deshpande]

## 0.38.5 - 2022-11-21

* Combine docker test and publish jobs [Kyle Harding]

## 0.38.4 - 2022-11-18

* Do not include the merge commit in the release notes [Felipe Lalanne]

## 0.38.3 - 2022-11-18

* Ensure github prepare job is run before gh publish [Felipe Lalanne]

## 0.38.2 - 2022-11-18

* Fix error in github_finalize if no release exists [Felipe Lalanne]

## 0.38.1 - 2022-11-18

* Fix finalization failures on npm/rust/github [Felipe Lalanne]

## 0.38.0 - 2022-11-17

* Add Rust support [Felipe Lalanne]

## 0.37.20 - 2022-11-16

* Test Flowzone without custom bake targets [Kyle Harding]

## 0.37.19 - 2022-11-12

* Remove compose test file from bake override [Kyle Harding]

## 0.37.18 - 2022-11-12

* Remove docker-compose.yml from parsed bake files [Kyle Harding]

## 0.37.17 - 2022-11-12

* Fix broken reference to the branch or tag when finalizing docker images [Kyle Harding]

## 0.37.16 - 2022-11-07

* Update docs [ab77]

## 0.37.15 - 2022-11-07

* Custom OS matrix [ab77]

## 0.37.14 - 2022-11-03

* Enable the execute bit for the pre-commit script [Kyle Harding]

## 0.37.13 - 2022-11-01

* Provide the git describe tag if versioning is disabled [Kyle Harding]

## 0.37.12 - 2022-11-01

* Check if python dev dependencies are already installed. [Genadi Naydenov]

## 0.37.11 - 2022-10-27

* Bump balena-versionist version. [Genadi Naydenov]

## 0.37.10 - 2022-10-25

* Don't publish to npmjs if already published [dsevastianov]

## 0.37.9 - 2022-10-25

* Fix docker pipeline when only `docker-compose.test.yml` is provided [Pagan Gazzard]

## 0.37.8 - 2022-10-21

* Deduplicate more uses of extractSourceArtifact [Pagan Gazzard]

## 0.37.7 - 2022-10-21

* Use the versioned source for the python pipeline [Pagan Gazzard]
* Deduplicate extracting the source artifact [Pagan Gazzard]

## 0.37.6 - 2022-10-21

* Use anchors/aliases to deduplicate the `Download source artifact` steps [Pagan Gazzard]
* Use a build step for flowzone.yml to support yaml features like anchors [Pagan Gazzard]

## 0.37.5 - 2022-10-21

* Fix adding protections to a branch that has no existing protections [Pagan Gazzard]

## 0.37.4 - 2022-10-21

* Support fetching submodule commits not in the repository HEAD [Alex Gonzalez]

## 0.37.3 - 2022-10-20

* Only login to registry if the NPM_TOKEN is present [Pagan Gazzard]

## 0.37.2 - 2022-10-20

* Only login to registry if the NPM_TOKEN is present [Pagan Gazzard]

## 0.37.1 - 2022-10-20

* Login to registry to enable installing private dependencies [Pagan Gazzard]

## 0.37.0 - 2022-10-20

* Add Python Poetry test to flowzone. Deduce suitable Python versions. Add Python (Poetry) test project to tests. Update the README.md accordingly. [Genadi Naydenov]

## 0.36.15 - 2022-10-19

* Fail if generating CHANGELOG.yml fails since the bug was fixed [Pagan Gazzard]

## 0.36.14 - 2022-10-19

* Update versionist to 6.8.4 to fix CHANGELOG.yml generation for new repos [Pagan Gazzard]
* Use generate-changelog.yml from the npm installed versionist [Pagan Gazzard]

## 0.36.13 - 2022-10-18

* Only check for version tags from the current branch [Pagan Gazzard]

## 0.36.12 - 2022-10-18

* Fix finding of npm 6 pack files [Pagan Gazzard]
* Only look for docker-bake/compose files in the root of the working dir [Pagan Gazzard]

## 0.36.11 - 2022-10-18

* Fix for empty COMPOSE_VARS [Page-]

## 0.36.10 - 2022-10-17

* Move compose environment generation [ab77]

## 0.36.9 - 2022-10-17

* Update readme to better explain the `protect_branch: false` intent [Pagan Gazzard]

## 0.36.8 - 2022-10-17

* Revert merging of docker test/publish steps [Pagan Gazzard]

## 0.36.7 - 2022-10-15

* Fix typo on finalizing Docker tags [Kyle Harding]

## 0.36.6 - 2022-10-15

* Fix typo when referencing new tag for Docker labels [Kyle Harding]

## 0.36.5 - 2022-10-15

* Only set cache-to and cache-from if they are unset [Kyle Harding]
* Reduce the cache mode from max to min [Kyle Harding]
* Combine docker tests and publish steps [Kyle Harding]
* Use git describe to generate a default tag [Kyle Harding]
* Maximize build space before running Docker bake [Kyle Harding]

## 0.36.4 - 2022-10-14

* Remove incorrect path character for `flowzone.yml` [Heath Raftery]

## 0.36.3 - 2022-10-14

* Only look for an npm pack in the working dir for node 6.x [Pagan Gazzard]

## 0.36.2 - 2022-10-14

* Only check in the root of the working dir for npm pack files [Page-]

## 0.36.1 - 2022-10-14

* Support build metadata in semvers for device repositories [Alex Gonzalez]

## 0.36.0 - 2022-10-14

* Support multiple Docker bake targets [Kyle Harding]

## 0.35.19 - 2022-10-13

* Always run `custom_always` step [ab77]

## 0.35.18 - 2022-10-13

* Debug npm pack [ab77]

## 0.35.17 - 2022-10-13

* Update balena-versionist/versionist [Pagan Gazzard]

## 0.35.16 - 2022-10-12

* Update set-output commands to use the new out environment file [Pagan Gazzard]

## 0.35.15 - 2022-10-12

* Pin balena-versionist/versionist versions [Pagan Gazzard]

## 0.35.14 - 2022-10-11

* Always convert Docker repositories to lower case [ab77]

## 0.35.13 - 2022-10-11

* Custom always action [ab77]

## 0.35.12 - 2022-10-05

* Remove default value for balena_slugs input [Kyle Harding]

## 0.35.11 - 2022-10-04

* Fix versioning race condition if others also update master directly [Pagan Gazzard]

## 0.35.10 - 2022-10-03

* Convert timeout input to a number [Kyle Harding]

## 0.35.9 - 2022-09-30

* Support pull requests against any branch rather than only the default [Alex Gonzalez]

## 0.35.8 - 2022-09-28

* Only allow tag events if versioning is disabled [Kyle Harding]

## 0.35.7 - 2022-09-28

* Ensure finalize events always have a sha [Kyle Harding]

## 0.35.6 - 2022-09-28

* Fix sha lookup when tagging main branch to finalize docker [Kyle Harding]

## 0.35.5 - 2022-09-28

* Avoid polluting the working directory with the source.tgz by using /tmp [Pagan Gazzard]

## 0.35.4 - 2022-09-28

* updates dockerhub docs [Otávio Jacobi]

## 0.35.3 - 2022-09-28

* Revert "Add tokens required for cloudflare pages to the README" [Anuj Deshpande]

## 0.35.2 - 2022-09-27

* Use gzip compression for the docker image artifact [Pagan Gazzard]

## 0.35.1 - 2022-09-27

* Use the `FLOWZONE_TOKEN` not `GITHUB_TOKEN` for publish docs [Pagan Gazzard]

## 0.35.0 - 2022-09-27

* Add support for publishing an npm `doc` script to github pages [Pagan Gazzard]

## 0.34.1 - 2022-09-27

* Use gzip compression for the source artifact [Pagan Gazzard]

## 0.34.0 - 2022-09-27

* Enable versioning by default, with a `disable_versioning` option [Pagan Gazzard]

## 0.33.1 - 2022-09-27

* Add documentation for custom job secrets/matrices [Pagan Gazzard]

## 0.33.0 - 2022-09-26

* Add support for custom finalize matrices [Felipe Lalanne]

## 0.32.1 - 2022-09-26

* Don't try to publish to balena if `balena_slugs` is empty [Pagan Gazzard]

## 0.32.0 - 2022-09-22

* Add support for custom job secrets [Pagan Gazzard]
* Add support for a custom test matrix [Pagan Gazzard]
* Add support for a custom publish matrix [Pagan Gazzard]

## 0.31.0 - 2022-09-21

* Automatically check out submodules recursively [Pagan Gazzard]

## 0.30.1 - 2022-09-20

* Fix header in README [Anuj Deshpande]

## 0.30.0 - 2022-09-20

* Add tokens required for cloudflare pages to the README [Anuj Deshpande]

## 0.29.0 - 2022-09-19

* Publish docker images with `v1.2.3` as well as `1.2.3` [Pagan Gazzard]

## 0.28.0 - 2022-09-19

* Add support for a `flowzone-preinstall` npm script [Pagan Gazzard]

## 0.27.0 - 2022-09-19

* Enable publishing/finalizing docker images without docker-compose tests [Pagan Gazzard]

## 0.26.1 - 2022-09-15

* Skip docker finalize if no docker images are specified [Page-]

## 0.26.0 - 2022-09-14

* Support specifying custom workflow names for branch protections [Pagan Gazzard]

## 0.25.10 - 2022-09-13

* Dynamic runs-on [ab77]

## 0.25.9 - 2022-09-13

* Test only from docker-compose.test.yml Run single service sut so that exit code is derived from this service [fisehara]

## 0.25.8 - 2022-09-13

* Revert Dockerfile parameter [ab77]

## 0.25.7 - 2022-09-12

* Add Dockerfile parameter [ab77]

## 0.25.6 - 2022-09-12

* Update docs. [ab77]

## 0.25.5 - 2022-09-12

* Specify balenaCloud environment [ab77]

## 0.25.4 - 2022-09-09

* Debug and fix npm pack issue missing grunt in publish [fisehara]

## 0.25.3 - 2022-09-08

* Fixing docker_images string and add empty check [fisehara]

## 0.25.2 - 2022-09-08

* Use prepacked artifacts for npm publish and finalize [Kyle Harding]

## 0.25.1 - 2022-09-08

* Default docker_images inputs to '' [fisehara]

## 0.25.0 - 2022-09-08

* Separate branch protection job into steps 1. fetch existing branch protection object 2. parse and remove resinCI and existing flowzone checks 3. prepare new branch protection update object. 4. check result containing `required_approving_review_count` [fisehara]

## 0.24.3 - 2022-09-08

* Install dependencies before npm publish if there are relevant scripts [Pagan Gazzard]

## 0.24.2 - 2022-09-07

* Document the supported merge method [Kyle Harding]
* Note that custom actions are not a stable interface [Kyle Harding]

## 0.24.1 - 2022-09-06

* Fix requirements for versioned commits [Kyle Harding]

## 0.24.0 - 2022-09-05

* Cancel in progress jobs of the same ref [Kyle Harding]

## 0.23.7 - 2022-09-05

* Allow clean jobs to run when a PR is merged [Kyle Harding]

## 0.23.6 - 2022-09-05

* Add support for custom clean actions [Kyle Harding]

## 0.23.5 - 2022-09-02

* Use tmp directory when generating changelog [Kyle Harding]

## 0.23.4 - 2022-09-02

* Fix typo when checking for merge events [Kyle Harding]
* Fix typo in the protect_branch example [Micah Halter]
* Use the event type helper to verify that the pr is merged [Kyle Harding]
* Continue when the changelog cannot be generated [Kyle Harding]

## 0.23.3 - 2022-09-01

* Document how to skip CI on the README #154 [fisehara]

## 0.23.2 - 2022-08-31

* Fix paths to example actions in readme [Kyle Harding]

## 0.23.1 - 2022-08-31

* Rename docker archvariant artifacts to include the sha256 [Kyle Harding]

## 0.23.0 - 2022-08-31

* Provide all secrets and inputs to the composite action via json [Kyle Harding]
* Rename path for composite actions to .github/actions/ [Kyle Harding]

## 0.22.3 - 2022-08-31

* Copy directly between remote tags on docker finalize [Kyle Harding]

## 0.22.2 - 2022-08-30

* Use a matrix for publishing docker images to multiple repositories [Kyle Harding]

## 0.22.1 - 2022-08-30

* Set the buildkit env var so compose can use existing cache [Kyle Harding]

## 0.22.0 - 2022-08-30

* Remove All Tests and All Published jobs [Kyle Harding]

## 0.21.6 - 2022-08-30

* Avoid failure if event object cannot be parsed as JSON [Kyle Harding]

## 0.21.5 - 2022-08-30

* Fix job conditions when ancestors of all_tests are skipped [Kyle Harding]
* Save docker image to file before running compose tests [Kyle Harding]
* Do not force build during docker-compose tests [Kyle Harding]

## 0.21.4 - 2022-08-30

* Standardize on GitHub cache for docker builds [Kyle Harding]
* Use formatted docker images list in publish checks [Kyle Harding]

## 0.21.3 - 2022-08-30

* Fix parsing of docker_images with newlines [Kyle Harding]

## 0.21.2 - 2022-08-30

* Clean up the steps required to match node engine versions [Kyle Harding]
* Only check node engine versions if npm is enabled [Kyle Harding]

## 0.21.1 - 2022-08-29

* Fix filtering of supported engines [Kyle Harding]

## 0.21.0 - 2022-08-29

* Fix typo when detecting custom publish steps [Kyle Harding]
* Replace context check with event types parser [Kyle Harding]

## 0.20.0 - 2022-08-29

* Use docker-bake action if a docker-bake.hcl file is found [Kyle Harding]

## 0.19.3 - 2022-08-29

* Find the intersection of the node engines and recent LTS releases [Kyle Harding]

## 0.19.2 - 2022-08-29

* Document usage of custom composite actions [Kyle Harding]

## 0.19.1 - 2022-08-29

* Set artifact retention days to 1 [Kyle Harding]

## 0.19.0 - 2022-08-28

* Remove docker platforms input and limit to amd64 for now [Kyle Harding]
* Remove node versions input and limit to 16.x for now [Kyle Harding]

## 0.18.2 - 2022-08-28

* Generate changelog before running versionist [Kyle Harding]

## 0.18.1 - 2022-08-28

* Revert "Remove resinCI config" [Kyle Harding]

## 0.18.0 - 2022-08-28

* Remove advanced docker inputs for now [Kyle Harding]
* Create .versionbot/CHANGELOG.yml if it does not exist [Kyle Harding]
* Apply versioning based on presence of repo.yml [Kyle Harding]
* Remove optional npm_registry input [Kyle Harding]

## 0.17.3 - 2022-08-27

* Only run protect branch on unmerged pull requests [Kyle Harding]
* Fix markdown warnings in README [Kyle Harding]
* Add package source and project types to branch rules [Kyle Harding]

## 0.17.2 - 2022-08-27

* Fix typo in branch rules [Kyle Harding]

## 0.17.1 - 2022-08-27

* Restore missing balena finalize job [Kyle Harding]

## 0.17.0 - 2022-08-27

* Rename push balena to publish balena to align with other types [Kyle Harding]
* Remove required status checks input [Kyle Harding]
* Rename draft jobs to publish [Kyle Harding]
* Only run docker publish if project type includes docker [Kyle Harding]
* Remove resinCI config [Kyle Harding]

## 0.16.5 - 2022-08-26

* patch: Fix typo in custom action detection [Kyle Harding]

## 0.16.4 - 2022-08-26

* Add cool logo [Phil Wilson]

## 0.16.3 - 2022-08-26

* Catch errors when custom actions are not found [Kyle Harding]
* Add required inputs to custom composite actions [Kyle Harding]

## 0.16.2 - 2022-08-26

* Add composite workflow support [Kyle Harding]

## 0.16.1 - 2022-08-26

* Fix tagging of draft docker images [Kyle Harding]

## 0.16.0 - 2022-08-26

* Rename versioned source to package source [Kyle Harding]
* Split docker publish steps into draft and finalize [Kyle Harding]
* Fix protect branch conditions to always run [Kyle Harding]
* Separate npm draft and finalize steps [Kyle Harding]
* Remove balena all job and just check on balena push [Kyle Harding]
* Add a check results job to check the results of all other jobs [Kyle Harding]

## 0.15.4 - 2022-08-26

* Always run protect branch job and check for overall failure [Kyle Harding]

## 0.15.3 - 2022-08-25

* Require a change-type for pull requests [Kyle Harding]

## 0.15.2 - 2022-08-25

* Fix parsing of the changelog when repo type is not node [Kyle Harding]

## 0.15.1 - 2022-08-25

* Fix input parsing when multiple docker images are provided [Kyle Harding]

## 0.15.0 - 2022-08-25

* Combine ghcr and dockerhub image lists into one [Kyle Harding]

## 0.14.2 - 2022-08-25

* Set required approvals back to 1 for flowzone [Kyle Harding]

## 0.14.1 - 2022-08-25

* Add example of configuring input to usage [Anuj Deshpande]

## 0.14.0 - 2022-08-24

* Fix behaviour of the npm private flag [Kyle Harding]
* Set repo type to node if package.json is detected [Kyle Harding]
* Rename docker credential secrets to be specific to DockerHub [Kyle Harding]
* Only push one balenaCloud release by default [Kyle Harding]
* Enable dockerhub artifacts by default [Kyle Harding]
* Fix anchor links in readme [Kyle Harding]

## 0.13.4 - 2022-08-24

* Force tagging because the previous commit must not have merged [Kyle Harding]

## 0.13.3 - 2022-08-24

* Replace BALENA_API_KEY_PUSH secret with BALENA_API_KEY [Kyle Harding]

## 0.13.2 - 2022-08-24

* Allow PRs without a change type to publish draft releases [Kyle Harding]

## 0.13.1 - 2022-08-24

* Describe secrets and inputs with headings instead of a table [Kyle Harding]

## 0.13.0 - 2022-08-24

* BREAKING: Switch to comma-delimited strings for inputs [Kyle Harding]
* Allow configuring of additional required status checks [Kyle Harding]

## 0.12.8 - 2022-08-24

* Create a symlink to balena.yml so it can be versioned [Kyle Harding]

## 0.12.7 - 2022-08-24

* Extract the new version from the changelog [Kyle Harding]

## 0.12.6 - 2022-08-24

* Do not include the v prefix on versioned docker tags [Kyle Harding]

## 0.12.5 - 2022-08-24

* Remove docker cache from input and use latest and edge tags [Kyle Harding]

## 0.12.4 - 2022-08-24

* Only run protect branch on pull request events [Kyle Harding]

## 0.12.3 - 2022-08-23

* Restore protect branch input that was removed by mistake [Kyle Harding]

## 0.12.2 - 2022-08-23

* Protect branch depends on all other jobs but allows skipped jobs [Kyle Harding]

## 0.12.1 - 2022-08-23

* Fix missing dependency on versioned source for docker publish [Kyle Harding]

## 0.12.0 - 2022-08-23

* Merge docker draft and docker finalize jobs [Kyle Harding]

## 0.11.0 - 2022-08-23

* Combine npm draft and npm final steps [Kyle Harding]
* Increase logging of npm publish commands [Kyle Harding]

## 0.10.1 - 2022-08-23

* Enable shell tracing across all jobs [Kyle Harding]
* Combine docker merge and tagged steps [Kyle Harding]

## 0.10.0 - 2022-08-23

* patch: Require full fetch depth for versionist [Kyle Harding]
* Fix typo in versioned source outputs [Kyle Harding]
* Skip extra versioning on npm merge [Kyle Harding]
* Combine version draft and tag jobs [Kyle Harding]
* Automatically determine max version applied by versionist [Kyle Harding]

## 0.9.1 - 2022-08-23

* Use skip_versioning flag to determine whether source is versioned [Kyle Harding]
* Determine the highest version in all versioned files [Kyle Harding]

## 0.9.0 - 2022-08-23

* Do versioning on the PR branch using balena-versionist. [Carlo Miguel F. Cruz]

## 0.8.3 - 2022-08-23

* Rename NPM to npm to match the official product name [Kyle Harding]

## 0.8.2 - 2022-08-23

* version_draft: Prefer version in package.json over VERSION file [Kyle Harding]

## 0.8.1 - 2022-08-22

* npm_merge: Download versioned source from previous workflow run [Kyle Harding]
* npm_merge: Get version from version_merge job [Kyle Harding]

## 0.8.0 - 2022-08-22

* Node npm package publishing [ab77]

# v0.7.0
## (2022-08-19)

* Run versionist if versiobot branch for PR does not exist. [Carlo Miguel F. Cruz]

# v0.6.12
## (2022-08-15)

* Hardcode the edge tag when merging without versionbot [Kyle Harding]
* Ensure NPM merge and tag only runs when npm sources are found [Kyle Harding]

# v0.6.11
## (2022-08-15)

* patch: Only extract version info if author is versionbot [Kyle Harding]

# v0.6.10
## (2022-08-15)

* Add optional secret for the ghcr.io token [Kyle Harding]
* Set ghcr.io username to flowzone [Kyle Harding]

# v0.6.9
## (2022-08-15)

* Move migration steps to a generic Getting Started section [Kyle Harding]
* Demonstrate that secrets can only be inherited in some cases [Kyle Harding]

# v0.6.8
## (2022-08-15)

* Generate Docker edge tags for merges without versionbot [Kyle Harding]
* patch: Remove unecessary versionbot check from balena_merge [Kyle Harding]
* patch: Remove prefix restrictions from tags trigger [Kyle Harding]

# v0.6.7
## (2022-08-15)

* patch: Fix inputs example in readme [Kyle Harding]

# v0.6.6
## (2022-08-15)

* Assert that versioned source is up-to-date [Kyle Harding]

# v0.6.5
## (2022-08-15)

* Fix protect branch run conditions [Kyle Harding]

# v0.6.4
## (2022-08-15)

* Refactor job dependencies [Kyle Harding]
* Rename source and context checks [Kyle Harding]

# v0.6.3
## (2022-08-14)

* patch: Fix check for tag events [Kyle Harding]

# v0.6.2
## (2022-08-14)

* Enable tag events for this repo only [Kyle Harding]

# v0.6.1
## (2022-08-14)

* patch: Fix check for versionbot author [Kyle Harding]

# v0.6.0
## (2022-08-14)

* Refactor the ghcr.io and docker.io deploy steps [Kyle Harding]
* Finalize balena releases on non-versionbot tags [Kyle Harding]
* patch: Rename jobs with project type prefix [Kyle Harding]
* patch: Group jobs by project type, not events [Kyle Harding]

# v0.5.5
## (2022-08-14)

* Only finalize artifacts on merge if versionbot is in use [Kyle Harding]
* Make some project-specific secrets optional [Kyle Harding]

# v0.5.4
## (2022-08-14)

* Update documentation for the supported project types [Kyle Harding]

# v0.5.3
## (2022-08-13)

* Add placeholder for NPM finalize [Kyle Harding]
* patch: Update maintenance section of readme [Kyle Harding]

# v0.5.2
## (2022-08-13)

* Create LICENSE [Kyle Harding]

# v0.5.1
## (2022-08-13)

* Document required secrets in readme [Kyle Harding]

# v0.5.0
## (2022-08-13)

* Refactor docker repositories into just ghcr.io and docker.io [Kyle Harding]
* Rename some jobs to reflect draft vs final [Kyle Harding]

# v0.4.11
## (2022-08-12)

* patch: Finalize balena releases on merge [Kyle Harding]

# v0.4.10
## (2022-08-12)

* Always run sanitize inputs and eval sources [Kyle Harding]
* Login to container registries for finalize [Kyle Harding]

# v0.4.9
## (2022-08-12)

* Login to container registries for finalize [Kyle Harding]

# v0.4.8
## (2022-08-12)

* Finalize docker images on merge events [Kyle Harding]

# v0.4.7
## (2022-08-12)

* Create a patch from the versioned commit and apply to main [Kyle Harding]
* Use last commmit from head of the PR branch for artifact tags [Kyle Harding]
* patch: Use base sha when checking out main branch for versioned cherry-pick [Kyle Harding]
* patch: Use tip of pull request branch to name artifacts [Kyle Harding]
* patch: Re-upload the versioned source artifact under a versioned name [Kyle Harding]
* Append git sha to versioned source artifact name [Kyle Harding]

# v0.4.6
## (2022-08-11)

* Push multiple architecture-specific balena releases by default [Kyle Harding]

# v0.4.5
## (2022-08-11)

* Create docker manifest after individual platforms [Kyle Harding]

# v0.4.4
## (2022-08-11)

* Avoid applying updated branch protections until all the jobs have passed [Kyle Harding]

# v0.4.3
## (2022-08-11)

* Split versioned source job into 3 smaller jobs [Kyle Harding]

# v0.4.2
## (2022-08-10)

* patch: Update examples in readme [Kyle Harding]

# v0.4.1
## (2022-08-10)

* Split node and docker jobs into matrices [Kyle Harding]
* Cherry-pick the versioned commit to main so we can gpg-sign [Kyle Harding]
* Rebase versioned source before pushing to main [Kyle Harding]

# v0.4.0
## (2022-08-10)

* Cherry-pick the versioned commit to main so we can gpg-sign [Kyle Harding]
* Rebase versioned source before pushing to main [Kyle Harding]
* Fix versioned source extraction on merge [Kyle Harding]
* Tar versioned source before upload to maintain permissions [Kyle Harding]
* Use versioned source artifacts downstream jobs [Kyle Harding]
* Add versioned source flow to merge versionbot commit to main [Kyle Harding]

# v0.3.0
## (2022-08-10)

* Merge docker composite steps into flowzone workflow [Kyle Harding]
* Merge NPM composite steps into flowzone workflow [Kyle Harding]
* Merge branch protection composite steps into flowzone workflow [Kyle Harding]
* Merge versionist composite steps into flowzone workflow [Kyle Harding]

# v0.2.0
## (2022-08-10)

* Add deploy to balena flow [Kyle Harding]

# v0.1.6
## (2022-08-10)

* Remove branch protection rules from migration workflow [Kyle Harding]

# v0.1.5
## (2022-08-10)

* Apply branch protection rules on PR events [Kyle Harding]

# v0.1.4
## (2022-08-09)

* patch: generate new GPG key (balena-ci) [ab77]

# v0.1.3
## (2022-08-09)

* patch: correct secrets/inputs [ab77]
* patch: correct inputs [ab77]
* Checkout prior to running actions [ab77]
* patch: configurable required_approving_review_count [ab77]

# v0.1.2
## (2022-08-09)

* patch: Rename versionist action [Kyle Harding]
* patch: Remove references to versionbot [Kyle Harding]

# v0.1.1
## (2022-08-09)

* patch: Change the versionbot author to Flowzone [Kyle Harding]

# v0.1.0
## (2022-08-09)

* Extend docker flow to support multiarch and pushing to registries [Kyle Harding]

# v0.0.5
## (2022-08-09)

* Require Flowzone tests [ab77]

# v0.0.4
## (2022-08-09)

* Update example workflows [Kyle Harding]

# v0.0.3
## (2022-08-09)

* Add resinCI migration instructions [ab77]

# v0.0.2
## (2022-08-09)

* Run versionist steps manually [Kyle Harding]
* patch: Checkout source before calling local composite actions [Kyle Harding]
* patch: Fix conditions for running versionbot [Kyle Harding]
* patch: Run versionbot on push to main branch [Kyle Harding]
* patch: Set versionbot to checkout the base_ref [Kyle Harding]
* patch: Set versionbot to checkout the base_ref [Kyle Harding]
