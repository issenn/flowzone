# Change Log

All notable changes to this project will be documented in this file
automatically by Versionist. DO NOT EDIT THIS FILE MANUALLY!
This project adheres to [Semantic Versioning](http://semver.org/).

## 0.46.4 - 2022-12-27

* Deploy to domain instead of pages.dev URL [Anuj Deshpande]

## 0.46.3 - 2022-12-20

* Remove duplication [ab77]

## 0.46.2 - 2022-12-20

* Only mask the values [ab77]

## 0.46.1 - 2022-12-19

* Mask COMPOSE_VARS secrets [balena-ci]

## 0.46.0 - 2022-12-17

* Add the tests_run_on value to the custom test environment as os_value [Thodoris Greasidis]

## 0.45.3 - 2022-12-17

* Require website build to pass [Kyle Harding]
* Enable docusaurus website build by default [Kyle Harding]

## 0.45.2 - 2022-12-16

* patch: Add input for custom website build [Vipul Gupta (@vipulgupta2048)]

## 0.45.1 - 2022-12-14

* Pin the default worker to ubuntu-22.04 [Kyle Harding]

## 0.45.0 - 2022-12-14

* chore(deps): update akhilerm/tag-push-action action to 2.1.0 [Renovate Bot]

## 0.44.0 - 2022-12-14

* chore(deps): pin dependencies [Renovate Bot]

## 0.43.4 - 2022-12-14

* renovate: run npm build instead of npm test [Kyle Harding]

## 0.43.3 - 2022-12-14

* Fix syntax of renovate post upgrade commands [Kyle Harding]

## 0.43.2 - 2022-12-13

* Add post-upgrade command for Renovate [Kyle Harding]

## 0.43.1 - 2022-12-13

* Extend filematch for Renovate github-actions manager [Kyle Harding]

## 0.43.0 - 2022-12-13

* Rename docusaurus-theme to docusaurus-builder [Anuj Deshpande]

## 0.42.5 - 2022-12-10

* patch: Add flowzone Docs website [Vipul Gupta (@vipulgupta2048)]

## 0.42.4 - 2022-12-09

* Fix dockerhub repository output for descriptions [Kyle Harding]

## 0.42.3 - 2022-12-09

* Enhance error message for GH API branch protection [fisehara]

## 0.42.2 - 2022-12-08

* Strip docker.io prefix when updating dockerhub description [Kyle Harding]

## 0.42.1 - 2022-12-08

* PR auto-merge only if reviewers > 0 [ab77]

## 0.42.0 - 2022-12-08

* Enable PR auto-merge [ab77]

## 0.41.13 - 2022-12-07

* patch: Convert publish command into one line [Vipul Gupta (@vipulgupta2048)]

## 0.41.12 - 2022-12-06

* Handle forking setting edge case [ab77]

## 0.41.11 - 2022-12-06

* Single line description [ab77]

## 0.41.10 - 2022-12-06

* Refactor description parameter handling [ab77]

## 0.41.9 - 2022-12-06

* Fix parameter handling [ab77]

## 0.41.8 - 2022-12-06

* Escape required quotes [ab77]

## 0.41.7 - 2022-12-06

* Trim repo description [ab77]

## 0.41.6 - 2022-12-06

* Correct missing quotes and is_org [ab77]

## 0.41.5 - 2022-12-06

* Correct conditional on empty input [ab77]

## 0.41.4 - 2022-12-06

* Correct conditional (use bool) [ab77]

## 0.41.3 - 2022-12-06

* Correct conditional (input, not job) [ab77]

## 0.41.2 - 2022-12-06

* Only depend on event_types [ab77]

## 0.41.1 - 2022-12-06

* Fix dependencies for repo_config job [ab77]

## 0.41.0 - 2022-12-06

* Standardise repository settings [ab77]

## 0.40.10 - 2022-12-05

* Allow GitHub pre-release(s) [ab77]
* Add a warning regarding COMPOSE_VARS secrets [Kyle Harding]

## 0.40.9 - 2022-12-05

* patch: Upgrade *versionist versions [Vipul Gupta]

## 0.40.8 - 2022-12-03

* Use verbose output in calls to `cross` command [Felipe Lalanne]

## 0.40.7 - 2022-12-02

* Checkout the PR merge branch for pull_request_target events [Kyle Harding]

## 0.40.6 - 2022-12-02

* Remove the checkout ref until it can be fixed properly [Kyle Harding]

## 0.40.5 - 2022-12-01

* Send branch to cloudflare so merge to master deploys to prod [Anuj Deshpande]

## 0.40.4 - 2022-12-01

* Add yaml header to repo.yml [vpnarea]

## 0.40.3 - 2022-11-30

* Fix refence to merge_commit_sha that was returning empty [Kyle Harding]

## 0.40.2 - 2022-11-30

* Avoid failing Flowzone internal tests when COMPOSE_VARS is unset [Kyle Harding]

## 0.40.1 - 2022-11-30

* Run clippy using cross for rust targets [Felipe Lalanne]

## 0.40.0 - 2022-11-30

* Use merge_commit_sha to checkout PR sources [Kyle Harding]
* For PR events we need the merged source [Kyle Harding]
* Update documentation to outline external contributions [Kyle Harding]
* Enable external contributions [Kyle Harding]

## 0.39.15 - 2022-11-29

* Only update dockerhub description on PRs to default branch [Kyle Harding]

## 0.39.14 - 2022-11-29

* Add security checks for external contributors [Kyle Harding]

## 0.39.13 - 2022-11-29

* Skip custom actions for external contributions by default [Kyle Harding]

## 0.39.12 - 2022-11-28

* patch: Document need for balena publish/finalize API secret [Vipul Gupta (@vipulgupta2048)]

## 0.39.11 - 2022-11-25

* Avoid leaking npm secrets during npm tests [Kyle Harding]

## 0.39.10 - 2022-11-25

* Add build- prefix to npm branch tags to avoid matching semver [Kyle Harding]

## 0.39.9 - 2022-11-24

* Only login to docker registries immediately before pushing [Kyle Harding]

## 0.39.8 - 2022-11-24

* Remove the global GHCR_TOKEN env var as it contains secrets [Kyle Harding]

## 0.39.7 - 2022-11-23

* Bump versionist & balena-versionist [Thodoris Greasidis]

## 0.39.6 - 2022-11-23

* Use merge source when creating github release notes [Felipe Lalanne]

## 0.39.5 - 2022-11-23

* Rename tag {branch} to build-{branch} for draft docker images [Kyle Harding]
* Run docker tests in parallel with npm and custom tests [Kyle Harding]
* Clone source during docker finalize for DockerHub description [Kyle Harding]

## 0.39.4 - 2022-11-22

* Update import-gpg action to v5.2.0 [Kyle Harding]

## 0.39.3 - 2022-11-22

* Reject workflow if latest branch commit is a merge commit [Kyle Harding]

## 0.39.2 - 2022-11-22

* Update kanga333/json-array-builder to v0.2.1 [Kyle Harding]

## 0.39.1 - 2022-11-22

* Update DockerHub description on docker finalize [Kyle Harding]

## 0.39.0 - 2022-11-21

* Add support for building a website using product-os/docusaurus-theme [Anuj Deshpande]

## 0.38.5 - 2022-11-21

* Combine docker test and publish jobs [Kyle Harding]

## 0.38.4 - 2022-11-18

* Do not include the merge commit in the release notes [Felipe Lalanne]

## 0.38.3 - 2022-11-18

* Ensure github prepare job is run before gh publish [Felipe Lalanne]

## 0.38.2 - 2022-11-18

* Fix error in github_finalize if no release exists [Felipe Lalanne]

## 0.38.1 - 2022-11-18

* Fix finalization failures on npm/rust/github [Felipe Lalanne]

## 0.38.0 - 2022-11-17

* Add Rust support [Felipe Lalanne]

## 0.37.20 - 2022-11-16

* Test Flowzone without custom bake targets [Kyle Harding]

## 0.37.19 - 2022-11-12

* Remove compose test file from bake override [Kyle Harding]

## 0.37.18 - 2022-11-12

* Remove docker-compose.yml from parsed bake files [Kyle Harding]

## 0.37.17 - 2022-11-12

* Fix broken reference to the branch or tag when finalizing docker images [Kyle Harding]

## 0.37.16 - 2022-11-07

* Update docs [ab77]

## 0.37.15 - 2022-11-07

* Custom OS matrix [ab77]

## 0.37.14 - 2022-11-03

* Enable the execute bit for the pre-commit script [Kyle Harding]

## 0.37.13 - 2022-11-01

* Provide the git describe tag if versioning is disabled [Kyle Harding]

## 0.37.12 - 2022-11-01

* Check if python dev dependencies are already installed. [Genadi Naydenov]

## 0.37.11 - 2022-10-27

* Bump balena-versionist version. [Genadi Naydenov]

## 0.37.10 - 2022-10-25

* Don't publish to npmjs if already published [dsevastianov]

## 0.37.9 - 2022-10-25

* Fix docker pipeline when only `docker-compose.test.yml` is provided [Pagan Gazzard]

## 0.37.8 - 2022-10-21

* Deduplicate more uses of extractSourceArtifact [Pagan Gazzard]

## 0.37.7 - 2022-10-21

* Use the versioned source for the python pipeline [Pagan Gazzard]
* Deduplicate extracting the source artifact [Pagan Gazzard]

## 0.37.6 - 2022-10-21

* Use anchors/aliases to deduplicate the `Download source artifact` steps [Pagan Gazzard]
* Use a build step for flowzone.yml to support yaml features like anchors [Pagan Gazzard]

## 0.37.5 - 2022-10-21

* Fix adding protections to a branch that has no existing protections [Pagan Gazzard]

## 0.37.4 - 2022-10-21

* Support fetching submodule commits not in the repository HEAD [Alex Gonzalez]

## 0.37.3 - 2022-10-20

* Only login to registry if the NPM_TOKEN is present [Pagan Gazzard]

## 0.37.2 - 2022-10-20

* Only login to registry if the NPM_TOKEN is present [Pagan Gazzard]

## 0.37.1 - 2022-10-20

* Login to registry to enable installing private dependencies [Pagan Gazzard]

## 0.37.0 - 2022-10-20

* Add Python Poetry test to flowzone. Deduce suitable Python versions. Add Python (Poetry) test project to tests. Update the README.md accordingly. [Genadi Naydenov]

## 0.36.15 - 2022-10-19

* Fail if generating CHANGELOG.yml fails since the bug was fixed [Pagan Gazzard]

## 0.36.14 - 2022-10-19

* Update versionist to 6.8.4 to fix CHANGELOG.yml generation for new repos [Pagan Gazzard]
* Use generate-changelog.yml from the npm installed versionist [Pagan Gazzard]

## 0.36.13 - 2022-10-18

* Only check for version tags from the current branch [Pagan Gazzard]

## 0.36.12 - 2022-10-18

* Fix finding of npm 6 pack files [Pagan Gazzard]
* Only look for docker-bake/compose files in the root of the working dir [Pagan Gazzard]

## 0.36.11 - 2022-10-18

* Fix for empty COMPOSE_VARS [Page-]

## 0.36.10 - 2022-10-17

* Move compose environment generation [ab77]

## 0.36.9 - 2022-10-17

* Update readme to better explain the `protect_branch: false` intent [Pagan Gazzard]

## 0.36.8 - 2022-10-17

* Revert merging of docker test/publish steps [Pagan Gazzard]

## 0.36.7 - 2022-10-15

* Fix typo on finalizing Docker tags [Kyle Harding]

## 0.36.6 - 2022-10-15

* Fix typo when referencing new tag for Docker labels [Kyle Harding]

## 0.36.5 - 2022-10-15

* Only set cache-to and cache-from if they are unset [Kyle Harding]
* Reduce the cache mode from max to min [Kyle Harding]
* Combine docker tests and publish steps [Kyle Harding]
* Use git describe to generate a default tag [Kyle Harding]
* Maximize build space before running Docker bake [Kyle Harding]

## 0.36.4 - 2022-10-14

* Remove incorrect path character for `flowzone.yml` [Heath Raftery]

## 0.36.3 - 2022-10-14

* Only look for an npm pack in the working dir for node 6.x [Pagan Gazzard]

## 0.36.2 - 2022-10-14

* Only check in the root of the working dir for npm pack files [Page-]

## 0.36.1 - 2022-10-14

* Support build metadata in semvers for device repositories [Alex Gonzalez]

## 0.36.0 - 2022-10-14

* Support multiple Docker bake targets [Kyle Harding]

## 0.35.19 - 2022-10-13

* Always run `custom_always` step [ab77]

## 0.35.18 - 2022-10-13

* Debug npm pack [ab77]

## 0.35.17 - 2022-10-13

* Update balena-versionist/versionist [Pagan Gazzard]

## 0.35.16 - 2022-10-12

* Update set-output commands to use the new out environment file [Pagan Gazzard]

## 0.35.15 - 2022-10-12

* Pin balena-versionist/versionist versions [Pagan Gazzard]

## 0.35.14 - 2022-10-11

* Always convert Docker repositories to lower case [ab77]

## 0.35.13 - 2022-10-11

* Custom always action [ab77]

## 0.35.12 - 2022-10-05

* Remove default value for balena_slugs input [Kyle Harding]

## 0.35.11 - 2022-10-04

* Fix versioning race condition if others also update master directly [Pagan Gazzard]

## 0.35.10 - 2022-10-03

* Convert timeout input to a number [Kyle Harding]

## 0.35.9 - 2022-09-30

* Support pull requests against any branch rather than only the default [Alex Gonzalez]

## 0.35.8 - 2022-09-28

* Only allow tag events if versioning is disabled [Kyle Harding]

## 0.35.7 - 2022-09-28

* Ensure finalize events always have a sha [Kyle Harding]

## 0.35.6 - 2022-09-28

* Fix sha lookup when tagging main branch to finalize docker [Kyle Harding]

## 0.35.5 - 2022-09-28

* Avoid polluting the working directory with the source.tgz by using /tmp [Pagan Gazzard]

## 0.35.4 - 2022-09-28

* updates dockerhub docs [Otávio Jacobi]

## 0.35.3 - 2022-09-28

* Revert "Add tokens required for cloudflare pages to the README" [Anuj Deshpande]

## 0.35.2 - 2022-09-27

* Use gzip compression for the docker image artifact [Pagan Gazzard]

## 0.35.1 - 2022-09-27

* Use the `FLOWZONE_TOKEN` not `GITHUB_TOKEN` for publish docs [Pagan Gazzard]

## 0.35.0 - 2022-09-27

* Add support for publishing an npm `doc` script to github pages [Pagan Gazzard]

## 0.34.1 - 2022-09-27

* Use gzip compression for the source artifact [Pagan Gazzard]

## 0.34.0 - 2022-09-27

* Enable versioning by default, with a `disable_versioning` option [Pagan Gazzard]

## 0.33.1 - 2022-09-27

* Add documentation for custom job secrets/matrices [Pagan Gazzard]

## 0.33.0 - 2022-09-26

* Add support for custom finalize matrices [Felipe Lalanne]

## 0.32.1 - 2022-09-26

* Don't try to publish to balena if `balena_slugs` is empty [Pagan Gazzard]

## 0.32.0 - 2022-09-22

* Add support for custom job secrets [Pagan Gazzard]
* Add support for a custom test matrix [Pagan Gazzard]
* Add support for a custom publish matrix [Pagan Gazzard]

## 0.31.0 - 2022-09-21

* Automatically check out submodules recursively [Pagan Gazzard]

## 0.30.1 - 2022-09-20

* Fix header in README [Anuj Deshpande]

## 0.30.0 - 2022-09-20

* Add tokens required for cloudflare pages to the README [Anuj Deshpande]

## 0.29.0 - 2022-09-19

* Publish docker images with `v1.2.3` as well as `1.2.3` [Pagan Gazzard]

## 0.28.0 - 2022-09-19

* Add support for a `flowzone-preinstall` npm script [Pagan Gazzard]

## 0.27.0 - 2022-09-19

* Enable publishing/finalizing docker images without docker-compose tests [Pagan Gazzard]

## 0.26.1 - 2022-09-15

* Skip docker finalize if no docker images are specified [Page-]

## 0.26.0 - 2022-09-14

* Support specifying custom workflow names for branch protections [Pagan Gazzard]

## 0.25.10 - 2022-09-13

* Dynamic runs-on [ab77]

## 0.25.9 - 2022-09-13

* Test only from docker-compose.test.yml Run single service sut so that exit code is derived from this service [fisehara]

## 0.25.8 - 2022-09-13

* Revert Dockerfile parameter [ab77]

## 0.25.7 - 2022-09-12

* Add Dockerfile parameter [ab77]

## 0.25.6 - 2022-09-12

* Update docs. [ab77]

## 0.25.5 - 2022-09-12

* Specify balenaCloud environment [ab77]

## 0.25.4 - 2022-09-09

* Debug and fix npm pack issue missing grunt in publish [fisehara]

## 0.25.3 - 2022-09-08

* Fixing docker_images string and add empty check [fisehara]

## 0.25.2 - 2022-09-08

* Use prepacked artifacts for npm publish and finalize [Kyle Harding]

## 0.25.1 - 2022-09-08

* Default docker_images inputs to '' [fisehara]

## 0.25.0 - 2022-09-08

* Separate branch protection job into steps 1. fetch existing branch protection object 2. parse and remove resinCI and existing flowzone checks 3. prepare new branch protection update object. 4. check result containing `required_approving_review_count` [fisehara]

## 0.24.3 - 2022-09-08

* Install dependencies before npm publish if there are relevant scripts [Pagan Gazzard]

## 0.24.2 - 2022-09-07

* Document the supported merge method [Kyle Harding]
* Note that custom actions are not a stable interface [Kyle Harding]

## 0.24.1 - 2022-09-06

* Fix requirements for versioned commits [Kyle Harding]

## 0.24.0 - 2022-09-05

* Cancel in progress jobs of the same ref [Kyle Harding]

## 0.23.7 - 2022-09-05

* Allow clean jobs to run when a PR is merged [Kyle Harding]

## 0.23.6 - 2022-09-05

* Add support for custom clean actions [Kyle Harding]

## 0.23.5 - 2022-09-02

* Use tmp directory when generating changelog [Kyle Harding]

## 0.23.4 - 2022-09-02

* Fix typo when checking for merge events [Kyle Harding]
* Fix typo in the protect_branch example [Micah Halter]
* Use the event type helper to verify that the pr is merged [Kyle Harding]
* Continue when the changelog cannot be generated [Kyle Harding]

## 0.23.3 - 2022-09-01

* Document how to skip CI on the README #154 [fisehara]

## 0.23.2 - 2022-08-31

* Fix paths to example actions in readme [Kyle Harding]

## 0.23.1 - 2022-08-31

* Rename docker archvariant artifacts to include the sha256 [Kyle Harding]

## 0.23.0 - 2022-08-31

* Provide all secrets and inputs to the composite action via json [Kyle Harding]
* Rename path for composite actions to .github/actions/ [Kyle Harding]

## 0.22.3 - 2022-08-31

* Copy directly between remote tags on docker finalize [Kyle Harding]

## 0.22.2 - 2022-08-30

* Use a matrix for publishing docker images to multiple repositories [Kyle Harding]

## 0.22.1 - 2022-08-30

* Set the buildkit env var so compose can use existing cache [Kyle Harding]

## 0.22.0 - 2022-08-30

* Remove All Tests and All Published jobs [Kyle Harding]

## 0.21.6 - 2022-08-30

* Avoid failure if event object cannot be parsed as JSON [Kyle Harding]

## 0.21.5 - 2022-08-30

* Fix job conditions when ancestors of all_tests are skipped [Kyle Harding]
* Save docker image to file before running compose tests [Kyle Harding]
* Do not force build during docker-compose tests [Kyle Harding]

## 0.21.4 - 2022-08-30

* Standardize on GitHub cache for docker builds [Kyle Harding]
* Use formatted docker images list in publish checks [Kyle Harding]

## 0.21.3 - 2022-08-30

* Fix parsing of docker_images with newlines [Kyle Harding]

## 0.21.2 - 2022-08-30

* Clean up the steps required to match node engine versions [Kyle Harding]
* Only check node engine versions if npm is enabled [Kyle Harding]

## 0.21.1 - 2022-08-29

* Fix filtering of supported engines [Kyle Harding]

## 0.21.0 - 2022-08-29

* Fix typo when detecting custom publish steps [Kyle Harding]
* Replace context check with event types parser [Kyle Harding]

## 0.20.0 - 2022-08-29

* Use docker-bake action if a docker-bake.hcl file is found [Kyle Harding]

## 0.19.3 - 2022-08-29

* Find the intersection of the node engines and recent LTS releases [Kyle Harding]

## 0.19.2 - 2022-08-29

* Document usage of custom composite actions [Kyle Harding]

## 0.19.1 - 2022-08-29

* Set artifact retention days to 1 [Kyle Harding]

## 0.19.0 - 2022-08-28

* Remove docker platforms input and limit to amd64 for now [Kyle Harding]
* Remove node versions input and limit to 16.x for now [Kyle Harding]

## 0.18.2 - 2022-08-28

* Generate changelog before running versionist [Kyle Harding]

## 0.18.1 - 2022-08-28

* Revert "Remove resinCI config" [Kyle Harding]

## 0.18.0 - 2022-08-28

* Remove advanced docker inputs for now [Kyle Harding]
* Create .versionbot/CHANGELOG.yml if it does not exist [Kyle Harding]
* Apply versioning based on presence of repo.yml [Kyle Harding]
* Remove optional npm_registry input [Kyle Harding]

## 0.17.3 - 2022-08-27

* Only run protect branch on unmerged pull requests [Kyle Harding]
* Fix markdown warnings in README [Kyle Harding]
* Add package source and project types to branch rules [Kyle Harding]

## 0.17.2 - 2022-08-27

* Fix typo in branch rules [Kyle Harding]

## 0.17.1 - 2022-08-27

* Restore missing balena finalize job [Kyle Harding]

## 0.17.0 - 2022-08-27

* Rename push balena to publish balena to align with other types [Kyle Harding]
* Remove required status checks input [Kyle Harding]
* Rename draft jobs to publish [Kyle Harding]
* Only run docker publish if project type includes docker [Kyle Harding]
* Remove resinCI config [Kyle Harding]

## 0.16.5 - 2022-08-26

* patch: Fix typo in custom action detection [Kyle Harding]

## 0.16.4 - 2022-08-26

* Add cool logo [Phil Wilson]

## 0.16.3 - 2022-08-26

* Catch errors when custom actions are not found [Kyle Harding]
* Add required inputs to custom composite actions [Kyle Harding]

## 0.16.2 - 2022-08-26

* Add composite workflow support [Kyle Harding]

## 0.16.1 - 2022-08-26

* Fix tagging of draft docker images [Kyle Harding]

## 0.16.0 - 2022-08-26

* Rename versioned source to package source [Kyle Harding]
* Split docker publish steps into draft and finalize [Kyle Harding]
* Fix protect branch conditions to always run [Kyle Harding]
* Separate npm draft and finalize steps [Kyle Harding]
* Remove balena all job and just check on balena push [Kyle Harding]
* Add a check results job to check the results of all other jobs [Kyle Harding]

## 0.15.4 - 2022-08-26

* Always run protect branch job and check for overall failure [Kyle Harding]

## 0.15.3 - 2022-08-25

* Require a change-type for pull requests [Kyle Harding]

## 0.15.2 - 2022-08-25

* Fix parsing of the changelog when repo type is not node [Kyle Harding]

## 0.15.1 - 2022-08-25

* Fix input parsing when multiple docker images are provided [Kyle Harding]

## 0.15.0 - 2022-08-25

* Combine ghcr and dockerhub image lists into one [Kyle Harding]

## 0.14.2 - 2022-08-25

* Set required approvals back to 1 for flowzone [Kyle Harding]

## 0.14.1 - 2022-08-25

* Add example of configuring input to usage [Anuj Deshpande]

## 0.14.0 - 2022-08-24

* Fix behaviour of the npm private flag [Kyle Harding]
* Set repo type to node if package.json is detected [Kyle Harding]
* Rename docker credential secrets to be specific to DockerHub [Kyle Harding]
* Only push one balenaCloud release by default [Kyle Harding]
* Enable dockerhub artifacts by default [Kyle Harding]
* Fix anchor links in readme [Kyle Harding]

## 0.13.4 - 2022-08-24

* Force tagging because the previous commit must not have merged [Kyle Harding]

## 0.13.3 - 2022-08-24

* Replace BALENA_API_KEY_PUSH secret with BALENA_API_KEY [Kyle Harding]

## 0.13.2 - 2022-08-24

* Allow PRs without a change type to publish draft releases [Kyle Harding]

## 0.13.1 - 2022-08-24

* Describe secrets and inputs with headings instead of a table [Kyle Harding]

## 0.13.0 - 2022-08-24

* BREAKING: Switch to comma-delimited strings for inputs [Kyle Harding]
* Allow configuring of additional required status checks [Kyle Harding]

## 0.12.8 - 2022-08-24

* Create a symlink to balena.yml so it can be versioned [Kyle Harding]

## 0.12.7 - 2022-08-24

* Extract the new version from the changelog [Kyle Harding]

## 0.12.6 - 2022-08-24

* Do not include the v prefix on versioned docker tags [Kyle Harding]

## 0.12.5 - 2022-08-24

* Remove docker cache from input and use latest and edge tags [Kyle Harding]

## 0.12.4 - 2022-08-24

* Only run protect branch on pull request events [Kyle Harding]

## 0.12.3 - 2022-08-23

* Restore protect branch input that was removed by mistake [Kyle Harding]

## 0.12.2 - 2022-08-23

* Protect branch depends on all other jobs but allows skipped jobs [Kyle Harding]

## 0.12.1 - 2022-08-23

* Fix missing dependency on versioned source for docker publish [Kyle Harding]

## 0.12.0 - 2022-08-23

* Merge docker draft and docker finalize jobs [Kyle Harding]

## 0.11.0 - 2022-08-23

* Combine npm draft and npm final steps [Kyle Harding]
* Increase logging of npm publish commands [Kyle Harding]

## 0.10.1 - 2022-08-23

* Enable shell tracing across all jobs [Kyle Harding]
* Combine docker merge and tagged steps [Kyle Harding]

## 0.10.0 - 2022-08-23

* patch: Require full fetch depth for versionist [Kyle Harding]
* Fix typo in versioned source outputs [Kyle Harding]
* Skip extra versioning on npm merge [Kyle Harding]
* Combine version draft and tag jobs [Kyle Harding]
* Automatically determine max version applied by versionist [Kyle Harding]

## 0.9.1 - 2022-08-23

* Use skip_versioning flag to determine whether source is versioned [Kyle Harding]
* Determine the highest version in all versioned files [Kyle Harding]

## 0.9.0 - 2022-08-23

* Do versioning on the PR branch using balena-versionist. [Carlo Miguel F. Cruz]

## 0.8.3 - 2022-08-23

* Rename NPM to npm to match the official product name [Kyle Harding]

## 0.8.2 - 2022-08-23

* version_draft: Prefer version in package.json over VERSION file [Kyle Harding]

## 0.8.1 - 2022-08-22

* npm_merge: Download versioned source from previous workflow run [Kyle Harding]
* npm_merge: Get version from version_merge job [Kyle Harding]

## 0.8.0 - 2022-08-22

* Node npm package publishing [ab77]

# v0.7.0
## (2022-08-19)

* Run versionist if versiobot branch for PR does not exist. [Carlo Miguel F. Cruz]

# v0.6.12
## (2022-08-15)

* Hardcode the edge tag when merging without versionbot [Kyle Harding]
* Ensure NPM merge and tag only runs when npm sources are found [Kyle Harding]

# v0.6.11
## (2022-08-15)

* patch: Only extract version info if author is versionbot [Kyle Harding]

# v0.6.10
## (2022-08-15)

* Add optional secret for the ghcr.io token [Kyle Harding]
* Set ghcr.io username to flowzone [Kyle Harding]

# v0.6.9
## (2022-08-15)

* Move migration steps to a generic Getting Started section [Kyle Harding]
* Demonstrate that secrets can only be inherited in some cases [Kyle Harding]

# v0.6.8
## (2022-08-15)

* Generate Docker edge tags for merges without versionbot [Kyle Harding]
* patch: Remove unecessary versionbot check from balena_merge [Kyle Harding]
* patch: Remove prefix restrictions from tags trigger [Kyle Harding]

# v0.6.7
## (2022-08-15)

* patch: Fix inputs example in readme [Kyle Harding]

# v0.6.6
## (2022-08-15)

* Assert that versioned source is up-to-date [Kyle Harding]

# v0.6.5
## (2022-08-15)

* Fix protect branch run conditions [Kyle Harding]

# v0.6.4
## (2022-08-15)

* Refactor job dependencies [Kyle Harding]
* Rename source and context checks [Kyle Harding]

# v0.6.3
## (2022-08-14)

* patch: Fix check for tag events [Kyle Harding]

# v0.6.2
## (2022-08-14)

* Enable tag events for this repo only [Kyle Harding]

# v0.6.1
## (2022-08-14)

* patch: Fix check for versionbot author [Kyle Harding]

# v0.6.0
## (2022-08-14)

* Refactor the ghcr.io and docker.io deploy steps [Kyle Harding]
* Finalize balena releases on non-versionbot tags [Kyle Harding]
* patch: Rename jobs with project type prefix [Kyle Harding]
* patch: Group jobs by project type, not events [Kyle Harding]

# v0.5.5
## (2022-08-14)

* Only finalize artifacts on merge if versionbot is in use [Kyle Harding]
* Make some project-specific secrets optional [Kyle Harding]

# v0.5.4
## (2022-08-14)

* Update documentation for the supported project types [Kyle Harding]

# v0.5.3
## (2022-08-13)

* Add placeholder for NPM finalize [Kyle Harding]
* patch: Update maintenance section of readme [Kyle Harding]

# v0.5.2
## (2022-08-13)

* Create LICENSE [Kyle Harding]

# v0.5.1
## (2022-08-13)

* Document required secrets in readme [Kyle Harding]

# v0.5.0
## (2022-08-13)

* Refactor docker repositories into just ghcr.io and docker.io [Kyle Harding]
* Rename some jobs to reflect draft vs final [Kyle Harding]

# v0.4.11
## (2022-08-12)

* patch: Finalize balena releases on merge [Kyle Harding]

# v0.4.10
## (2022-08-12)

* Always run sanitize inputs and eval sources [Kyle Harding]
* Login to container registries for finalize [Kyle Harding]

# v0.4.9
## (2022-08-12)

* Login to container registries for finalize [Kyle Harding]

# v0.4.8
## (2022-08-12)

* Finalize docker images on merge events [Kyle Harding]

# v0.4.7
## (2022-08-12)

* Create a patch from the versioned commit and apply to main [Kyle Harding]
* Use last commmit from head of the PR branch for artifact tags [Kyle Harding]
* patch: Use base sha when checking out main branch for versioned cherry-pick [Kyle Harding]
* patch: Use tip of pull request branch to name artifacts [Kyle Harding]
* patch: Re-upload the versioned source artifact under a versioned name [Kyle Harding]
* Append git sha to versioned source artifact name [Kyle Harding]

# v0.4.6
## (2022-08-11)

* Push multiple architecture-specific balena releases by default [Kyle Harding]

# v0.4.5
## (2022-08-11)

* Create docker manifest after individual platforms [Kyle Harding]

# v0.4.4
## (2022-08-11)

* Avoid applying updated branch protections until all the jobs have passed [Kyle Harding]

# v0.4.3
## (2022-08-11)

* Split versioned source job into 3 smaller jobs [Kyle Harding]

# v0.4.2
## (2022-08-10)

* patch: Update examples in readme [Kyle Harding]

# v0.4.1
## (2022-08-10)

* Split node and docker jobs into matrices [Kyle Harding]
* Cherry-pick the versioned commit to main so we can gpg-sign [Kyle Harding]
* Rebase versioned source before pushing to main [Kyle Harding]

# v0.4.0
## (2022-08-10)

* Cherry-pick the versioned commit to main so we can gpg-sign [Kyle Harding]
* Rebase versioned source before pushing to main [Kyle Harding]
* Fix versioned source extraction on merge [Kyle Harding]
* Tar versioned source before upload to maintain permissions [Kyle Harding]
* Use versioned source artifacts downstream jobs [Kyle Harding]
* Add versioned source flow to merge versionbot commit to main [Kyle Harding]

# v0.3.0
## (2022-08-10)

* Merge docker composite steps into flowzone workflow [Kyle Harding]
* Merge NPM composite steps into flowzone workflow [Kyle Harding]
* Merge branch protection composite steps into flowzone workflow [Kyle Harding]
* Merge versionist composite steps into flowzone workflow [Kyle Harding]

# v0.2.0
## (2022-08-10)

* Add deploy to balena flow [Kyle Harding]

# v0.1.6
## (2022-08-10)

* Remove branch protection rules from migration workflow [Kyle Harding]

# v0.1.5
## (2022-08-10)

* Apply branch protection rules on PR events [Kyle Harding]

# v0.1.4
## (2022-08-09)

* patch: generate new GPG key (balena-ci) [ab77]

# v0.1.3
## (2022-08-09)

* patch: correct secrets/inputs [ab77]
* patch: correct inputs [ab77]
* Checkout prior to running actions [ab77]
* patch: configurable required_approving_review_count [ab77]

# v0.1.2
## (2022-08-09)

* patch: Rename versionist action [Kyle Harding]
* patch: Remove references to versionbot [Kyle Harding]

# v0.1.1
## (2022-08-09)

* patch: Change the versionbot author to Flowzone [Kyle Harding]

# v0.1.0
## (2022-08-09)

* Extend docker flow to support multiarch and pushing to registries [Kyle Harding]

# v0.0.5
## (2022-08-09)

* Require Flowzone tests [ab77]

# v0.0.4
## (2022-08-09)

* Update example workflows [Kyle Harding]

# v0.0.3
## (2022-08-09)

* Add resinCI migration instructions [ab77]

# v0.0.2
## (2022-08-09)

* Run versionist steps manually [Kyle Harding]
* patch: Checkout source before calling local composite actions [Kyle Harding]
* patch: Fix conditions for running versionbot [Kyle Harding]
* patch: Run versionbot on push to main branch [Kyle Harding]
* patch: Set versionbot to checkout the base_ref [Kyle Harding]
* patch: Set versionbot to checkout the base_ref [Kyle Harding]
